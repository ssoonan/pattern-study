## 객체 생성 패턴 연습

프로그래밍 언어를 처음 배울 시 C가 아닌 이상 클래스, 객체는 반드시 나온다.
어느 정도 개발 경력이 생기면 객체가 뭔지, 언제 쓸지 느낌은 온다.

하지만 정작 이 객체의 **생성** 또한 주의해야 한다는 건 쉽게 알기 어렵다.

우리는 클래스에 적당히 데이터를 때려박고 필요에 따라 생성하며 쓴다.  
하지만 이렇게 객체를 만들다보면 기능이 추가될 때마다 코드를 계속 수정하고, 분기는 계속 늘어난다.

이를 예방하고자 객체를 만들 때 익혀야하는 생성 패턴에 대해 알아보자.


### 팩토리 메서드

클래스를 설계하는 관점과는 반대로, <u>사용</u>하는 관점에서 봐보자.(client)

객체가 확장된다는 말은 공통된 부분이 있고 이를 통한 확장을 의미. 즉 **추상 클래스 or 인터페이스**가 존재  

이 객체와는 별도로 객체를 **생성**하는 메서드를 만듦. 이 메서드의 <u>반환타입</u>을 인터페이스의 구현체로  

이 때 팩토리 메서드 또한 상속되어, 각각의 구현체들을 반환할 수 있게 함.  
그렇지만 client에서는 다형성으로 사용하기에 코드의 변경이 필요 없음.


즉 어떤 인스턴스가 생성되어도 클라이언트는 코드 수정없이 쓸 수 있다.

핵심은 인터페이스와 이를 반환하는 팩토리 함수. 그리고 이 추상을 사용하는 클라이언트
\+ 팩토리 함수 또한 상속으로 만들어져야 한다!
> 상속으로 만들어진 게 아니라 그냥 분기로 간단히 처리하면 `simple factory`라고도 함


#### 추상 팩토리

추상 팩토리는 그냥 팩토리 메서드와 어떻게 다른가?
정의상으론 추상 팩토리는 일련의 팩토리 메서드 **집합체**로 여러 객체들을 구성하여 통합적으로 만들 때 쓴다.

보통 이 땐 추상 팩토리 자체가 하나의 클래스로, client가 이 클래스를 가지고 객체를 다룸.

하지만 다른 자료에선 **추상 팩토리**를 여기의 팩토리 메서드, **팩토리 메서드**를 여기의 심플 팩토리로 말하는 경우도 더러 있다.

정확한 용어가 중요하다기보단, 상황에 맞게 쓰면 되겠다. 핵심은 어쨌든 객체 생성을 바로 안하는 대신 다르게 한다는 점이니까.

>팩토리 패턴의 중요한 점은, 제어 흐름에 맞게 객체를 생성하는 게 아니라는 점  
그보단 제어 흐름에 역전하는 인터페이스들을 중간에 넣고, 고수준을 참조해서 코드 변경을 줄이려는 일련의 과정이다.


### 빌더


어느 클래스가 굉장히 복잡하고 내용이 많다.  
이 땐 초기화, 생성자를 덕지덕지 붙이는 것도 일이다. 
그렇게 알아보게 힘들게 만들 바에는 객체를 생성하는 과정을 단계별로 수행하는 builder를 만들자.

builder를 통해 인스턴스를 만들면 복잡한 과정은 builder 내부에서 처리 하기 때문에 쉽게 객체를 만들 수 있다.


### 싱글턴


